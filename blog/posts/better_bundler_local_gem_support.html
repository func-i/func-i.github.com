<!DOCTYPE html>
<html>
    <head>
        <title>Func-i: Bundler gets better local gem support</title>

        <meta name="description" content="width=device-width, maximum-scale=1.0, initial-scale=1.0, user-scalable=yes" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

        <link rel="stylesheet" type="text/css" href="../../css/bootstrap.css" />
        <link rel="stylesheet" type="text/css" href="../../css/prettify.css"  />
        <script type="text/javascript" src="../../js/prettify.js"></script>

        <link href='http://fonts.googleapis.com/css?family=Open+Sans+Condensed:700' rel='stylesheet' type='text/css'>
        <link href="../../css/fi.css" rel="stylesheet" type="text/css" />
        <link id="theme" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.17/themes/start/jquery-ui.css" rel="stylesheet" />

        <!--[if IE]>
	<link href="../../css/ie.css" rel="stylesheet" type="text/css" />
                <![endif]-->

        <style>
            body{
                font-family: 'Lucida Bright';
                /*                background-color: #4A555C;
                                color:white;
                */
                background-color: white;
                color:#414141;

            }
            .container{
            }
        </style>

        <script type="text/javascript">

            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-30299155-1']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();

        </script>
    </head>
    <body onload="prettyPrint()">

        <div id="nav">
            <h2 id="logo2"><img src="../../img/logo-type.png" alt="logo-type" width="216" height="20" /></h2>
            <ul>
                <li id="nav-home"><a href="../../index.html#/home"><span>Home</span></a></li>
                <li><a href="../../index.html#/about"><span>What we do</span></a></li>
                <li><a href="../../index.html#/testimonials"><span>Portfolio</span></a></li>

                <li><a href="../../index.html#/profiles"><span>Who we are</span></a></li>
                <li><a class="active" href="#"><span>Blog</span></a>	</li>
                <li><a href="../../index.html#/contact"><span>Contact Us</span></a>	</li>

            </ul>
        </div>

        <div class="container">
            <header style="margin-top:70px;">
                <h1>Bundler gets better local gem support</h1>
                <p class="lead">How we used it and why you will too <small>by <a href="https://github.com/Sailias">Sailias</a>, Friday March 23rd, 2012</small></p>
            </header>

            <section>
                <div class="row">
                    <div class="span12">
                        <p>
                            There are times when developing that we need to tweak a gem to better suit our needs.   Consider the following Gemfile:
                        </p>
                        <pre class="prettyprint lang-ruby">gem 'nokogiri'</pre>
                        <p>
                            This will fetch the latest Nokogiri tag from RubyGems and install it in your $GEM_PATH.  What if you want to modify the nokogiri gem and submit a pull request?
                        </p>
                        <pre class="prettyprint lang-ruby">gem 'nokogiri', :git => 'git@github.com:Sailias/nokogiri.git'</pre>
                        <p>
                            This will use my fork of nokogiri, but how would I do development on it?  I can clone it, push changes back to my fork, then bundle update. If I commit some bad code, I will end up cluttering my commit log with garbage, so this approach not even a real option.
                            What we really need to do is include a local version of our gem in our project.
                        </p>
                        <h3>Here comes :path</h3><br/>
                        <pre class="prettyprint lang-ruby">gem 'nokogiri', :path => '/path/to/nokogiri'</pre>
                        <p>
                            Up until now, using the path option was the recommended approach. This will use a local repository where I can freely modify it as I see fit.  From there I can commit and push my changes up.
                        </p>
                        <p>
                            This approach does come with some drawbacks, though.
                            Once included in your Gemfile, all developers will now have to install a local version of this gem in the path specified, even if they don't plan on modifying the gem like you do.
                            This means the Gemfile is no longer production ready, the app can break and you now have a file that cannot be committed.  You could also run into path problems depending on your platform.
                            What if we could still use a local gem <em>if we wanted to</em> and also allow the user to specify the location?
                            A common problem that was <a href="https://gist.github.com/2063855">discussed recently</a>, which resulted in...</p>
                        <h3>Bundler's latest answer</h3><br/>
                        <p>
                            Recent <a href="https://github.com/carlhuda/bundler/pull/1779" target="_blank">commits</a> from <a href="https://github.com/josevalim" target="_blank">Jos&eacute; Valim</a> to bundler have added functionality to configure local paths for each gem.
                        </p>
                        <pre class="prettyprint lang-c">
# in your project folder
$> bundle config local.nokogiri /path/to/local/nokogiri</pre>
                        <pre class="prettyprint lang-ruby">gem 'nokogiri', :git => 'git@github.com:Sailias/nokogiri.git', :branch => 'master'</pre>
                        <p>
                            That's it!  Bundler has now been configured to use the version of nokogiri at the specified location!
                            This feature only works for git dependencies and the branch option is required because it will match up with the branch in the local path to ensure your local gem isn't on another branch.
                            You can also switch between branches of this gem using this functionality.
                        </p>
                        <p>
                            Bundler will work just like path and will still load your local changes, but will also keep track of the current revision in your Gemfile.lock in order to stay in sync with remote changes.
                            This is a much more dynamic approach than :path, which allows each user to control their config, yet still keeps the simplicity that makes bundler <strong>amazing</strong>.
                        </p>
                    </div>
                </div>
            </section>

            <!--section>
                <div id="disqus_thread"></div>
                <script type="text/javascript">
                    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                    var disqus_shortname = 'func-i';
                    var disqus_url = 'http://www.functionalimperative.com/blog/blog.html';
                    var disqus_title = "Test"
                    var disqus_developer = 1; // developer mode is on

                    /* * * DON'T EDIT BELOW THIS LINE * * */
                    (function() {
                        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>                
            </section-->

        </div>

        <div id="footer">&nbsp;</div>
    </body>
</html>
